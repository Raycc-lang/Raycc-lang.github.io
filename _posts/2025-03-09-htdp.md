---
layout: post
title:  "什么是计算机程序以及如何写一个程序?"
date:   2025-03-05 12:43:42 +0800
categories: jekyll update
---

### 前言

所谓写程序就是不断地尝试，直到它能正确地运行，你同意这个观点吗？

有一群计算机科学的研究者和教育工作者非常讨厌这个说法，说它是计算机教育界最大的谎言。
他们希望学生从一开始就对程序有深入地理解，对设计程序的过程有系统性地认知，通过严谨的流程来设计程序。

我对他们的工作非常着迷，今天我想读一读他们的书[“How TO Design Program”（如何设计程序）](https://htdp.org/)，来学习一点计算机科学的基础概念。

本文是这本书前言，序言以及第一章节部分内容的读后感。我会用自己的话总结一下什么是程序，讲解他们称为“design recipe”（设计配方）的系统性的程序设计方法。

这是一个非常基础，但是不容易讲清楚的话题。如果你对计算机程序没有太多了解，或者你从没思考过计算机程序，相信读完本文你会对这些概念有更深的认知。

### 计算机程序

要了解计算机程序首先我们需要知道什么是计算机。这个概念似乎很明显--计算机就是帮助我们计算的机器。

但是能帮我们计算的机器有很多，比如数学课上会用到的计算器是计算机吗？当我们用扳手指头帮我们计算的时候，手指头是计算机吗？

当然这些问题的答案不是绝对的，取决于我们对计算机的定义。本书的正是从数手指的例子开始帮助我们理解计算机的，因为它们在本质上是一样的。不过从我们生活常识出发，我们不认为计算器是计算机。因为计算机可以帮我做的事儿似乎远超普通的数学计算器。

因为计算机的复杂性，想要让计算机按照我们想要的方式运行，我们就需要一些指令，告诉计算机如何按照我们想要的方式运行。这就是计算机程序出场的地方--我们把这些告诉计算机如何运行的指令叫做程序。

我们也知道除了可以运行的程序，在没有编译之前，程序也可以是源代码的形式。在github上我们可以看到好多这种源代码。

要编写这些源代码我们需要一种编程语言。有趣的是这些编程语言也需要一个程序来实现。这几位作者是研究语义学的，是这方面的专家，他们提供非常深刻的洞见和优质的资源供我们学习，我之后一定会写一篇博客介绍他们在这方面的工作。

程序员使用一种编程语言编写一条条的指令，这些代表计算机指令的符号被称为表达式。换句话说编程就是编写表达式。作者说的系统性地编程，意味着有条理地组织这些表达式。

### 函数

既然要系统性地组织表达式，则需要一种组织方法，这本书中用函数来组织表达式。

每个人都在小学数学课上学过函数。虽然数学课上的函数和计算机程序中的函数定义会有所不同，计算机程序中的函数指的是*表达式*的一种组织方式，也就是一些指令块。但是他们在本质上却是一样的，可以帮助我们理解计算机程序中的函数。

我们在数学课中学过的函数可能是是这样的： y=x+5 或者 f(x) = x+ 5。 当我们给x一个不同的额值得时候f(x)或者y得值也会变化。在程序中我们说函数接收一个参数，然后根据接受的参数回返一个值。 它们的区别是数学课中的函数只处理数字，而程序中的函数处理各种不同类型的数据。

### 程序和函数的关系

我们之前说到程序是给计算的指令，让计算机帮我的计算。它接受一些信息，然后产生一些信息。这跟函数非常相似，就像为了解决数学题我们写下一个函数，带入值，最后得到结果一样。是的，程序和函数之前的关系非常密切，一个可能会让你吃惊的事实是：程序所处理的信息和函数所处理的数据是一回事儿--在现实世界中我们叫做信息的东西，在计算机里面我们把它成为数据。

![如图](/Raycc-lang.github.io/_posts/pictures/pict_42.png)  
程序接受用户的信息并在内部定义成数据，函数的定义规定了处理数据的过程。调用函数后得到处理过后的数据，把处理过后的数据返回给用户，由用户解读成信息。

它们的不同点的是程序由真实世界的事件触发，比如用户的鼠标点击，而程序的输出内容旨在对真实世界产生影响，比如给用户提供一些信息。而函数在程序内部被定义和触发（调用）。

所以程序包含了数据和函数。一个最简单的程序可能只包含了一个函数。不过更常见的模式是程序中由一个主函数（一般叫做main）和多个辅助用的函数（叫做帮助函数或者辅助函数）构成，主函数调用辅助函数来处理程序中的数据。

### 如何编程

因此从数据定义到程序的过程非常关键。我们需要明确程序处理什么样的问题，它接受哪些信息，生成哪些信息，以及输入和输出之间的映射。我们需要弄清楚我们选择编程语言里面包含已经自定义了哪些函数以及我们需要编写哪些函数。一旦完成程序，我们需要检查程序是否按照预期运行。

或许我们可以不断尝试，直到从输入信息得到像样的结果。但是更好的方式是遵循遵循明确的步骤写出清晰容易阅读的代码。

以下是作者总结出来的编程的六个步骤：
1. 从问题分析到数据定义；  
    明确程序中需要处理的核心信息，用编程语言的数据类型建立对应关系，最后编写正式的数据定义，对于复杂的数据还需要附具体示例说明。

2. 函数签名、用途说明与桩函数；  
    签名：声明函数的输入/输出数据类型。 
    用途：说明函数的功能目标。
    桩函数：编写符合签名的空函数框架。

3. 功能示例；  
    编写典型输入/输出案例，通过这些示例具体说明函数的预期行为。

4. 函数模板；  
    根据数据定义构建函数结构框架，确定条件判断分支等基本结构。

5. 函数实现；  
    在模板中填充具体逻辑代码，结合用途说明和示例来确保正确性。

6. 测试；  
    将示例转化为自动化测试用例，确保函数通过所有测试。测试既用于发现错误，也作为可执行文档。

完成了第六步，如果测试不通过，或者功能改动还是需要回到第四步或者第二部。

作者称以上这个过程即适合开发短的只包含一个函数的程序，适合大型甚至超大型的项目。
并且这个过程甚至可以迁移到其他的技能上面，作为一个通用的解决问题的流程：

“步骤一：解析问题陈述，描述的实际问题；

步骤二：抽象提炼核心要素，
抽离具体情境，建立抽象模型；

步骤三：通过示例具象化核心要素，
用典型场景案例说明抽象模型；

步骤四：基于分析制定方案框架，
创建实施计划与结构化提纲；

步骤五：对照预期目标验证成果，
通过预设标准评估输出结果；

步骤六：基于缺陷实施迭代优化，
根据测试失败案例修正解决方案。”

不知道读者你注意到没有，这跟我的博客文字的结构也非常相似，我一直在尝试实践这个流程。


### 结束语

之前讲了函数是组织表达式的方式之一，我才你可能会问还有没有其他的组织表达式的方法，你可能也对一些面向对象的程序语言非常熟悉。作者们只提到了函数是我们小学数学课上都学过的东西，比较好理解，它们没说的是，这本书来自Racket这本编程语言的社区，Racket原本是Scheme的实现方式之一，后来随着它的发展逐渐和Scheme的理念不同，因此分道扬镳。而Scheme常被认为是Lisp的方言。Lisp是一种非常古老却影响深远的编程语言。在黑客与画家这本书中，作者称它是面向未来的编程的语言，因为本来是数学理论的实现，在过去的机器上遇到性能瓶颈，随着机器的发展，程序员更多地抽象思考，它的价值会越来越大。我们可以相信这种思想是有深厚的理论基础的。

而且这种以函数为模块来组织信息的方式跟我们思考方式也很像--我们的思考过程也是一个处理信息的过程。使用这种方式也能帮助我们清晰思考。




